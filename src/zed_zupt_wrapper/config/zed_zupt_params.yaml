zed_zupt_filter_node:
  ros__parameters:
    # Topic settings
    input_odom_topic: "/zed/zed_node/odom"
    input_imu_topic: "/zed/zed_node/imu/data"
    output_odom_topic: "/zed/zed_node/odom_zupt"

    # ========================================
    # ZUPT detection parameters
    # ========================================

    # Acceleration threshold for stationary detection (m/s²)
    # Maximum acceleration for determining robot is stationary
    # - Too low: Even small vibrations detected as movement → Reduced ZUPT effectiveness
    # - Too high: May incorrectly detect movement as stationary
    # Recommended value: 0.3-0.7 m/s²
    zupt_accel_threshold: 0.7 #0.5

    # Angular velocity threshold for stationary detection (rad/s)
    # Maximum angular velocity for determining robot is stationary
    # - Too low: Even small rotations detected as movement
    # - Too high: May incorrectly detect rotation as stationary
    # Recommended value: 0.05-0.15 rad/s
    zupt_gyro_threshold: 0.1

    # ZUPT detection window size (number of samples)
    # Number of IMU samples used for stationary detection
    # - Small: Fast response but susceptible to noise
    # - Large: More stable but slower response
    # For ZED2i IMU at 400Hz:
    #   10 samples = 25ms
    #   20 samples = 50ms
    #   40 samples = 100ms
    # Recommended value: 10-30
    zupt_window_size: 25 #15

    # ZUPT confidence threshold (0.0-1.0)
    # Percentage of samples in window that must meet stationary conditions
    # - Low: Easier to trigger stationary detection (aggressive correction)
    # - High: Only triggers when certainly stationary (conservative correction)
    # Recommended value: 0.6-0.8
    zupt_confidence_threshold: 0.9 #0.7

    # ========================================
    # Odometry correction parameters
    # ========================================

    # Maximum velocity jump limit (m/s)
    # Maximum velocity change between samples
    # Suppresses sudden velocity changes due to drift
    # Recommended value: 0.3-0.7 m/s
    max_velocity_jump: 0.5

    # Maximum angular velocity jump limit (rad/s)
    # Maximum angular velocity change between samples
    # Recommended value: 0.5-1.5 rad/s
    max_angular_jump: 1.0

    # Velocity decay rate (0.0-1.0)
    # How much to decay velocity when stationary is detected
    # - Close to 1.0: Velocity decreases gradually (smooth)
    # - Close to 0.0: Velocity drops to zero rapidly
    # Recommended value: 0.9-0.98
    velocity_decay_rate: 0.95

    # ZUPT enable flag
    # false: Disable ZUPT filter (passthrough mode)
    # true: Enable ZUPT filter
    enable_zupt: true
